<!-- investments.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <title>Investments</title>
</head>
<body>
<h1>Investments</h1>
<!-- Display investments here -->
<div class="container bg-dark">
  <h1 class="mt-4 mb-4">Stock Portfolios</h1>

  <table class="table table-dark table-striped">
    <thead>
    <tr>
      <th>ID</th>
      <th>Name</th>
      <th>Issuer</th>
      <th>Symbol</th>
      <th></th>

    </tr>
    </thead>
    <tbody id="investmentList">
    <!-- Portfolio items will be added here dynamically -->
    </tbody>
  </table>
  <script>
        function getInvestmentsByPortfolioId(portfolioId) {
            fetch(`http://localhost:8080/api/portfolio/${portfolioId}/investments`)
                .then(response => response.json())
                .then(investments => displayInvestments(investments))
                .catch(error => console.error('Error:', error));
        }
         function displayInvestments(investments) {
            const investmentList = document.getElementById('investmentList');
            investmentList.innerHTML = '';
            investments.forEach(investment => {
                const investmentItem = document.createElement('tr');
                investmentItem.innerHTML = `<td>${investment.id}</td> <td>${investment.name}</td>
                <td>${investment.issuer}</td><td>${investment.symbol}</td>
                <td class="btn-group" role="group" aria-label="Basic example">
                    <button type="button" class="btn btn-danger">Delete</button>
                    <button type="button" class="btn btn-primary">Add Investment</button>
                </td>`;
                investmentList.appendChild(investmentItem);
            });
        }
        // Call the function when the page is fully loaded
        document.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            const portfolioId = urlParams.get('id');
            if (portfolioId) {
                getInvestmentsByPortfolioId(portfolioId);
            }
        });

  </script>
</div>
</body>
</html>
